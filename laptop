#!/bin/sh

. ./helpers.sh

log_info "Running laptop script..."

. link_dotfiles

if command -v brew >/dev/null 2>&1; then
  log_info "Updating Homebrew..."
  brew update
else
  log_echo "Installing Homebrew..."
  /usr/bin/ruby -e "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)"
fi

log_info "Running Brew bundler..."
brew bundle --no-upgrade
brew bundle --file=Caskfile

./macos
./projects
./ruby
./node

terminal_theme=$(defaults read ~/Library/Preferences/com.apple.Terminal.plist "Default Window Settings" 2>/dev/null)

if [ "$terminal_theme" != "Ocean Dark" ]; then
  log_warn "Install Terminal theme."
  log_warn "Location: laptop/themes/Ocean Dark.terminal"
fi

unset terminal_theme

log_pass "DONE"
